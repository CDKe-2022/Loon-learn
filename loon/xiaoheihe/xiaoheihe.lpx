#!name = 小黑盒签到
#!desc = 签到测试
#!author = qwen
#!tag = 签到
#!system = 
#!system_version = 
#!loon_version = 3.2.1(745)
#!icon = https://gitlab.com/lodepuly/iconlibrary/-/raw/main/App_icon/120px/Douyu.png
#!date = 2026-01-04 09:21:08

[Argument]
XHHCookie = switch, true, false, tag = 小黑盒获取Cookie, desc = 控制是否获取小黑盒签到任务cookie
XHHSign = switch, true, false, tag = 小黑盒签到, desc = 控制是否执行小黑盒签到任务

[Script]
# Cookie捕获脚本 - 当访问小黑盒API时自动捕获cookie
http-request ^https?:\/\/api\.xiaoheihe\.cn\/task\/sign_v3\/get_sign_state.* requires-body=1,max-size=0,script-path=https://github.com/CDKe-2022/Loon-learn/raw/refs/heads/main/loon/xiaoheihe/xiaoheihe_cookie.js, script-update-interval=0, timeout=20, tag=小黑盒获取Cookie, enable = {XHHCookie}

# 定时签到（每天 10:00 执行）
cron "0 10 * * *" script-path=https://raw.githubusercontent.com/CDKe-2022/Loon-learn/refs/heads/main/loon/xiaoheihe/xiaoheihe_sign.js, timeout=300, tag=小黑盒每日签到, img-url=https://gitlab.com/lodepuly/iconlibrary/-/raw/main/App_icon/120px/Douyu.png, enable = {XHHSign}

[MITM]
hostname = api.xiaoheihe.cn
